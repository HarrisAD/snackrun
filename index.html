<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnackRun - Game</title>
    <link rel="stylesheet" href="styles.css">
    <script>
    // Error interception to prevent external errors from blocking your game
    window.addEventListener('error', function(event) {
      console.log('Error caught by handler:', event.error);
      // Prevent the error from stopping execution if it's from a browser extension
      if (event.filename && event.filename.includes('content.js')) {
        event.preventDefault();
        return true;
      }
    });
    
    // Disable or mock localStorage if needed
    try {
      window.localStorage.getItem('test');
    } catch (e) {
      // Create a mock localStorage if access is restricted
      var mockStorage = {};
      Object.defineProperty(window, 'localStorage', {
        get: function() {
          return {
            getItem: function(key) { return mockStorage[key] || null; },
            setItem: function(key, value) { mockStorage[key] = value; },
            removeItem: function(key) { delete mockStorage[key]; },
            clear: function() { mockStorage = {}; }
          };
        }
      });
    }
    </script>
</head>
<body>
    <div class="game-container">
        <h1>SnackRun - Game</h1>
        <canvas id="gameCanvas" width="800" height="600" tabindex="1"></canvas>
        <div class="debug-info">
            <p>FPS: <span id="fps">0</span></p>
            <p>Game Loop Status: <span id="loopStatus">Initializing...</span></p>
        </div>
        <div class="instructions">
            <p><strong>Controls:</strong></p>
            <ul>
                <li>Left/Right Arrows: Move character</li>
                <li>Up Arrow: Jump</li>
                <li>S Key: Open Shop Menu</li>
                <li>ESC Key: Close Shop Menu</li>
                <li>R Key: Reset current level</li>
                <li>P Key: Pause game</li>
            </ul>
            <p><strong>IMPORTANT:</strong> Click on the canvas first to enable keyboard controls!</p>
        </div>
    </div>
    
    <!-- Make sure type="module" is here to properly enable ES6 modules -->
    <script type="module" src="game.js"></script>
</body>
</html>